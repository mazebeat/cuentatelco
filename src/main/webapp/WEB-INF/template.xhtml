<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <meta name="theme-color" content="#{beanGuestPreferences.themeColors[beanGuestPreferences.theme]}" />
        </f:facet>
        <title>IData</title>
        <h:outputScript name="js/nanoscroller.js" library="ultima-layout" />
        <h:outputScript name="js/layout.js" library="ultima-layout" />
        <h:outputScript name="js/ripple.js" library="ultima-layout" />
        <h:outputScript name="js/swipe.js" library="ultima-layout" />
        <ui:insert name="head"/>
    </h:head>

    <f:event listener="#{loginBean.isAdmin}" type="preRenderView" />

    <h:body styleClass="main-body #{beanGuestPreferences.compact ? 'layout-compact' : null}">
        <div class="layout-wrapper #{beanGuestPreferences.menuLayout}">
            <ui:include src="./topbar.xhtml" />
            <ui:include src="./menu.xhtml" />

            <div class="layout-main">
                <ui:insert name="content"/>

                <ui:include src="./footer.xhtml" />
            </div>
        </div>

        <ui:include src="../ajaxstatus.xhtml" />

        <h:outputStylesheet name="css/nanoscroller.css" library="ultima-layout" />
        <h:outputStylesheet name="css/animate.css" library="ultima-layout" />
        <h:outputStylesheet name="css/ripple.css" library="ultima-layout" />
        <h:outputStylesheet name="css/layout-#{beanGuestPreferences.theme}.css" library="ultima-layout" />        
        <style type="text/css">
            body .ui-fieldset, body .ui-fieldset .ui-fieldset-legend .ui-fieldset-toggler {
                padding: 5px;
            }
            body .ui-fieldset .ui-fieldset-legend .ui-fieldset-toggler {
            }
            .text-uppercase {
                text-transform: uppercase;
            }
            .list-unstyled { 
                padding-left: 0;
                list-style: none;
            }
            .list-inline {
                padding-left: 0;
                margin-left: -5px;
                list-style: none;
            }
            .list-inline > li {
                display: inline-block;
                float: left;
                padding-right: 5px;
                padding-left: 5px;
            }

            .footer {
                color: #ffffff;                
            }
            .footer .card {
                background-color: #0273af;
            }
            .footer a {
                font-size: 12px;
            }

            .footer a,
            .footer a:link,
            .footer a:visited,
            .footer a:focus,
            .footer a:hover {
                color: #ffffff;
            }
            .footer .social-icons img {
                max-width: 42px; 
            }

            .ui-inputfield {
                padding: 0;
            }
        </style>
    </h:body>

    <script type="text/javascript">
        //<![CDATA[
        function logout(xhr, status, args) {
            setTimeout(function () {
                window.location = 'login.xhtml';
            }, 500);
        }
        function manageRegister(xhr, status, args) {
            console.log(xhr, status, args);
            if (!args.validationFailed && args.isRegistered) {
                setTimeout(function () {
                    window.location = args.view;
                }, 500);
            }
        }
        //]]>
    </script>
</html>